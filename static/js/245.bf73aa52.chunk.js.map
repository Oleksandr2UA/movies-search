{"version":3,"file":"static/js/245.bf73aa52.chunk.js","mappings":"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","sources":["components/Modal/Modal.jsx","page/MovieDetails/MovieDetails.jsx"],"sourcesContent":["import { Loader } from \"../Loader/Loader\";\nimport { useState, useEffect } from \"react\";\nimport { Range } from \"react-range\";\nimport Switch from \"react-switch\";\nimport \"../Modal/Modal.css\";\n\nconst localStorageKeys = {\n  opacity: \"bg-opacity\",\n  theme: \"isNight-theme\",\n};\nconst initOpacity = 0.6;\nconst initTheme = false;\n\n// READ LOCAL STORAGE\nfunction readLocalStorageOpacity() {\n  const savedOpacity = localStorage.getItem(localStorageKeys.opacity);\n  if (savedOpacity !== null) return [JSON.parse(savedOpacity)];\n  return [initOpacity];\n}\nfunction readLocalStorageTheme() {\n  const savedTheme = localStorage.getItem(localStorageKeys.theme);\n  if (savedTheme !== null) return JSON.parse(savedTheme);\n  return initTheme;\n}\n\n// Modal component\nexport const Modal = ({ closeModal, src }) => {\n  const [values, setValues] = useState(() => readLocalStorageOpacity());\n  const [isNight, setIsNight] = useState(() => readLocalStorageTheme());\n  const [isLoading, setIsLoading] = useState(true);\n\n  // WHEN MODAL IS OPENED\n  useEffect(() => {\n    // Forbid scrolling when the modal is open\n    document.body.classList.add(\"no-scroll\");\n\n    const onCloseModalByEsc = (event) => {\n      if (event.code === \"Escape\") {\n        closeModal();\n      }\n    };\n\n    window.addEventListener(\"keydown\", onCloseModalByEsc);\n\n    return () => {\n      // Enable scroll when the modal is closed\n      document.body.classList.remove(\"no-scroll\");\n      window.removeEventListener(\"keydown\", onCloseModalByEsc);\n    };\n  }, [closeModal]);\n\n  const onCloseModal = () => {\n    closeModal();\n  };\n  const onLoadingPlayer = () => {\n    console.log(\"Loaded\");\n    setIsLoading(false);\n  };\n  function onOpacityChange(values) {\n    console.log(values);\n    setValues(values);\n  }\n\n  useEffect(() => {\n    localStorage.setItem(localStorageKeys.opacity, JSON.stringify(values[0]));\n  }, [values]);\n  useEffect(() => {\n    localStorage.setItem(localStorageKeys.theme, JSON.stringify(isNight));\n  }, [isNight]);\n\n  // STYLES DEPENDING ON THEME\n  const backgroundColor = isNight ? \"black\" : \"white\";\n  const textColor = isNight ? \"rgba(255, 255, 250, 0.4)\" : \"black\";\n  const rangeCircleColor = isNight ? \"rgba(255, 255, 250, 0.7)\" : \"black\";\n\n  // Formula to invert value\n  const invertValue = (value, inputMin, inputMax, outputMin, outputMax) => {\n    return (\n      outputMin +\n      ((inputMax - value) * (outputMax - outputMin)) / (inputMax - inputMin)\n    );\n  };\n  const rangeBgColor = isNight\n    ? `rgba(162, 162, 162, ${invertValue(values[0], 0.3, 1, 0.3, 0.7)})`\n    : `rgba(0, 0, 0, ${values[0]})`;\n\n  return (\n    <>\n      <div\n        className=\"overlay\"\n        onClick={onCloseModal}\n        style={{ backgroundColor: `rgba(0, 0, 0, ${values[0]})` }}\n      />\n      <div className=\"modalWindow\" style={{ backgroundColor }}>\n        <div style={{ visibility: isLoading ? \"visible\" : \"hidden\" }}>\n          <Loader isNight={isNight} height=\"50\" width=\"50\" />\n        </div>\n\n        <iframe\n          width=\"860\"\n          height=\"415\"\n          onLoad={onLoadingPlayer}\n          src={src}\n          title=\"YouTube video player\"\n          frameBorder=\"0\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          allowFullScreen\n        ></iframe>\n        <div className=\"settings\" style={{ color: textColor }}>\n          {/* Opacity Control */}\n          <Range\n            step={0.009}\n            min={0.3}\n            max={1}\n            values={values}\n            onChange={onOpacityChange}\n            renderTrack={({ props, children }) => (\n              <div\n                {...props}\n                style={{\n                  ...props.style,\n                  height: \"6px\",\n                  width: \"150px\",\n                  backgroundColor: rangeBgColor,\n                }}\n              >\n                {children}\n              </div>\n            )}\n            renderThumb={({ props }) => (\n              <div\n                {...props}\n                style={{\n                  ...props.style,\n                  height: \"20px\",\n                  width: \"20px\",\n                  backgroundColor: rangeCircleColor,\n                }}\n              />\n            )}\n          />\n          <label htmlFor=\"volume\" className=\"settings-range-label\">\n            Make background darker\n          </label>\n\n          {/* Day/Night Switch Control */}\n          <span>Switch theme</span>\n          <Switch\n            onChange={setIsNight}\n            checked={isNight}\n            onColor=\"#0e1112\"\n            offColor=\"#ffcc33\"\n            checkedIcon={\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  height: \"100%\",\n                  fontSize: 18,\n                  color: \"white\",\n                  paddingRight: 2,\n                }}\n              >\n                🌙\n              </div>\n            }\n            uncheckedIcon={\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  height: \"100%\",\n                  fontSize: 18,\n                  color: \"white\",\n                  paddingRight: 2,\n                }}\n              >\n                ☀️\n              </div>\n            }\n            handleDiameter={28}\n            height={40}\n            width={70}\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n","import { useRef, useEffect, useState, Suspense } from \"react\";\nimport { Link, Outlet, useLocation, useParams } from \"react-router-dom\";\nimport { FaRegStar, FaStar, FaStarHalfAlt } from \"react-icons/fa\";\nimport { fetchFilmDetails } from \"../../components/api/fetchFilms\";\nimport { Loader } from \"../../components/Loader/Loader\";\nimport { Modal } from \"../../components/Modal/Modal\";\nimport \"../MovieDetails/MovieDetails.css\";\nimport \"../Home/Home.css\";\n\nconst MovieDetails = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [info, setInfo] = useState({});\n  const [trailer, setTrailer] = useState(null);\n  const [isOpenModal, setIsOpenModal] = useState(false);\n\n  const { movieId } = useParams();\n  //* Location\n  const location = useLocation(); // Ця location в state отримує собі звідки прийшов (з Movies прокидую пропом)\n  const backLinkLocationRef = useRef(location.state?.from ?? \"/movies\"); // В реф зберігаю, тепер навіть коли сторінка оновлюється/re-render через cast, reviews в .current буде правильна локація\n  // А якщо прийшов з нової вкладки, перейде на /movies\n  //* Location end\n\n  function onCloseModal() {\n    setIsOpenModal(false);\n  }\n\n  function onOpenModal() {\n    setIsOpenModal(true);\n  }\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    async function getDetails() {\n      try {\n        setIsLoading(true);\n        const { movieData, video } = await fetchFilmDetails(\n          movieId,\n          abortController\n        );\n        setInfo(movieData);\n        setTrailer(video);\n        setError(null);\n      } catch (error) {\n        if (error.message === \"canceled\") return;\n        setError(\n          \"Something went wrong, try reloading page, if it doesnt help, there is no info about this film\"\n        );\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    getDetails();\n    return () => {\n      abortController.abort();\n    };\n  }, [movieId]);\n\n  return (\n    <>\n      <Link to={backLinkLocationRef.current} className=\"go-back-link\">\n        Go back\n      </Link>\n      {error && Object.keys(info).length === 0 && (\n        <>\n          <h2 className=\"error\">{error}</h2>\n        </>\n      )}\n      {isLoading && <Loader />}\n      {Object.keys(info).length !== 0 && (\n        <div className=\"movie-details\">\n          <img\n            src={`https://image.tmdb.org/t/p/w500${info.poster_path}`}\n            width=\"200px\"\n            height=\"300px\"\n            alt=\"poster\"\n          />\n          <div className=\"movie-info\">\n            <h1>{info.title}</h1>\n            <p className=\"movie-stars\">\n              {info.vote_average.toFixed(1) >= 7 ? (\n                <FaStar key={info.id} className=\"star\" />\n              ) : info.vote_average.toFixed(1) >= 5 ? (\n                <FaStarHalfAlt key={info.id} className=\"star\" />\n              ) : (\n                <FaRegStar key={info.id} className=\"empty-star\" />\n              )}\n              {info.vote_average.toFixed(1) + \"/10\"}\n            </p>\n            <h3 className=\"movie-subtitle\">Overview: </h3>\n            <p>{info.overview}</p>\n            <button onClick={onOpenModal}>Watch trailer</button>\n            <h4 className=\"movie-genres\">Genres:</h4>\n            {info.genres.map(({ id, name }) => {\n              const path = `/movies/${movieId}/${id}`;\n              return (\n                <Link to={path} key={id} state={{ from: location }}>\n                  <span>{name} </span>\n                </Link>\n              );\n            })}\n          </div>\n        </div>\n      )}\n      {!isLoading && Object.keys(info).length === 0 && <Loader />}\n      {trailer && isOpenModal && (\n        <Modal closeModal={onCloseModal} src={trailer} />\n      )}\n      {Object.keys(info).length !== 0 && (\n        <>\n          <p>\n            <Link to=\"cast\" className=\"sidebar-link\">\n              Cast\n            </Link>\n          </p>\n          <p>\n            <Link to=\"reviews\" className=\"sidebar-link\">\n              Reviews\n            </Link>\n          </p>\n          <p>\n            <Link to=\"similar\" className=\"sidebar-link\">\n              Show similar movies\n            </Link>\n          </p>\n          <Suspense>\n            <Outlet />\n          </Suspense>\n        </>\n      )}\n    </>\n  );\n};\nexport default MovieDetails;\n"],"names":["localStorageKeys","Modal","_ref","closeModal","src","values","setValues","useState","savedOpacity","localStorage","getItem","JSON","parse","readLocalStorageOpacity","isNight","setIsNight","savedTheme","readLocalStorageTheme","isLoading","setIsLoading","useEffect","document","body","classList","add","onCloseModalByEsc","event","code","window","addEventListener","remove","removeEventListener","setItem","stringify","backgroundColor","textColor","rangeCircleColor","rangeBgColor","value","inputMin","inputMax","outputMin","outputMax","invertValue","_jsxs","_Fragment","children","_jsx","className","onClick","onCloseModal","style","visibility","Loader","height","width","onLoad","onLoadingPlayer","console","log","title","frameBorder","allow","allowFullScreen","color","Range","step","min","max","onChange","renderTrack","_ref2","props","renderThumb","_ref3","htmlFor","Switch","checked","onColor","offColor","checkedIcon","display","justifyContent","alignItems","fontSize","paddingRight","uncheckedIcon","handleDiameter","MovieDetails","_location$state$from","_location$state","error","setError","info","setInfo","trailer","setTrailer","isOpenModal","setIsOpenModal","movieId","useParams","location","useLocation","backLinkLocationRef","useRef","state","from","abortController","AbortController","async","movieData","video","fetchFilmDetails","message","getDetails","abort","Link","to","current","Object","keys","length","poster_path","alt","vote_average","toFixed","FaStar","id","FaStarHalfAlt","FaRegStar","overview","genres","map","name","path","Suspense","Outlet"],"sourceRoot":""}