/*! For license information please see 552.e5224ad0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmovies_search=self.webpackChunkmovies_search||[]).push([[552],{552:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(43),r=s(216),l=s(475),a=s(776),o=s(613),i=s(496),c=s(623);const u=async(e,t,s,n)=>{const r=await(0,c.ce)(e,t,s);if(console.log("movies length: ",r.length),1===n){return r.filter((e=>{let{vote_count:t}=e;return t>=1e3}))}if(2===n){return r.filter((e=>{let{vote_count:t}=e;return t<1e3&&t>=200}))}if(3===n){return r.filter((e=>{let{vote_count:t}=e;return t<1e3&&t<200}))}};var h=s(31),d=s(579);const f=()=>{var e,t;const{genreId:s}=(0,r.g)(),{movieId:c}=(0,r.g)(),f=(0,r.zy)(),m=`/movies/${c}`,g=(0,n.useRef)(null!==(e=null===(t=f.state)||void 0===t?void 0:t.from)&&void 0!==e?e:m),[j,x]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[b,p]=(0,n.useState)([]),[N,k]=(0,n.useState)(1),[y,S]=(0,n.useState)(null),[_,C]=(0,n.useState)(!1),[F,I]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=new AbortController;return async function(){try{x(!0);const t=await u(s,e,1,1);p(t),C(!0),k(2),w(null)}catch(v){if("canceled"===v.message)return;w("Something went wrong, try reloading page, if it doesnt help, there is no info about other films of this actor")}finally{x(!1)}}(),()=>{e.abort()}}),[s]),(0,n.useEffect)((()=>{const e=(0,i.H)([Number(s)]);S(e[0].name)}),[s]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.N_,{to:c?g.current:"/genres",className:"go-back-link",children:"Go back"}),(0,d.jsxs)("h2",{className:"genre-list-title header-page-title",children:["Films with ",(0,d.jsx)("span",{className:"genre-list-title-name",children:y})," ","genre"]}),0!==b.length&&(0,d.jsxs)("div",{className:"scroll_wrapper",children:[(0,d.jsx)(h.Is,{}),(0,d.jsx)(h.e0,{})]}),v&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("h2",{className:"error",children:v})}),j&&(0,d.jsx)(o.a,{}),0!==b.length?(0,d.jsx)(a.n,{films:b,movieId:c}):!j&&(0,d.jsx)(o.a,{}),_&&!j?(0,d.jsx)("button",{type:"button",className:"genre-btn-load",onClick:async function(){C(!1),I(!0);const e=new AbortController;if(2===N){const t=await u(s,e,N,2);p((e=>[...e,...t]))}else if(3===N){const t=await u(s,e,N,3);p((e=>[...e,...t]))}k((e=>e+1)),C(3!==N),I(!1)},children:"Load more"}):F&&!j&&0!==b.length?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.a,{})}):null,0!==b.length&&(0,d.jsxs)("div",{className:"scroll_wrapper",children:[(0,d.jsx)(h.eq,{}),(0,d.jsx)(h.e0,{})]})]})}}}]);
//# sourceMappingURL=552.e5224ad0.chunk.js.map